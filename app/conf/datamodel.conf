# Morphosource v0.1 datamodel
#
# This file defines the relational datamodel used by the application. 
#
# "tables" below lists all of the tables in the application datamodel that have
# a likenamed model-class (an application class inheriting from either BaseModel or its subclasses). 
# ** DO NOT list tables that for whatever reason do not have a corresponding model class **
#
# "relationships" below lists all of the relationships between tables in the datamodel, using
# the format "<table1>.<field1> = <table2>.<field2>". The listed relationships are used to verify
# relational integrity, generate full-text indices across tables and populate user interface elements  
# that incorporate data from more than one table. In general, you should explicitly list
# all relationships here unless you know why you shouldn't.

tables = {
	"ca_acl" 									= 1,
	"ca_application_vars"						= 2,
	"ca_attribute_values"						= 3,
	"ca_attributes"								= 4,
	"ca_change_log"								= 5,
	"ca_change_log_subjects"					= 6,
#"ca_eventlog"								= 27,
	"ca_groups_x_roles"							= 30,
	"ca_ips"									= 31,
	"ca_list_item_labels"						= 32,
	"ca_list_items"								= 33,
	"ca_list_items_x_list_items"				= 34,
	"ca_list_labels"							= 35,
	"ca_lists"									= 36,
	"ca_locales"								= 37,
	"ca_metadata_element_labels"				= 41,
	"ca_metadata_elements"						= 42,
	"ca_metadata_type_restrictions"				= 43,
	"ca_relationship_type_labels"				= 78,
	"ca_relationship_types"						= 79,
	"ca_task_queue"								= 90,
	"ca_user_groups"							= 91,
	"ca_user_roles"								= 92,
	"ca_users"									= 94,
	"ca_users_x_groups"							= 95,
	"ca_users_x_roles"							= 96,
	"ca_item_comments"							= 109,
	"ca_item_tags"								= 110,
	"ca_items_x_tags"							= 111,
	"ca_item_views"								= 112,
	"ca_user_notes"								= 145,
	"ca_bookmark_folders" = 164,
	"ca_bookmarks" = 165,
	"ms_bibliography" = 166,
	"ms_facilities" = 167,
	"ms_institutions" = 168,
	"ms_media" = 169,
	"ms_media_x_bibliography" = 170,
	"ms_media_x_ontology" = 171,
	"ms_ontology" = 172,
	"ms_ontology_hierarchy" = 173,
	"ms_ontology_terms" = 174,
	"ms_project_users" = 175,
	"ms_projects" = 176,
	"ms_specimens" = 177,
	"ms_specimens_x_bibliography" = 178,
	"ms_specimens_x_ontology" = 179,
	"ms_specimens_x_taxonomy" = 180,
	"ms_taxonomy" = 181,
	"ms_taxonomy_names" = 182,
	"ms_media_multifiles" = 183
}

relationships = [
	"ca_acl.group_id = ca_user_groups.group_id",
	"ca_acl.user_id = ca_users.user_id",
	"ca_attributes.element_id = ca_metadata_elements.element_id",
	"ca_attributes.attribute_id = ca_attribute_values.attribute_id",
	"ca_attribute_values.element_id = ca_metadata_elements.element_id",
	"ca_attributes.locale_id = ca_locales.locale_id 1000",
	"ca_attribute_values.item_id = ca_list_items.item_id",
	"ca_change_log_subjects.log_id = ca_change_log.log_id",
	
	"ca_groups_x_roles.group_id = ca_user_groups.group_id",
	"ca_groups_x_roles.role_id = ca_user_roles.role_id",
	"ca_ips.user_id = ca_users.user_id",
	"ca_list_item_labels.item_id = ca_list_items.item_id 500",
	"ca_list_item_labels.locale_id = ca_locales.locale_id 1000",
	"ca_list_item_labels.type_id = ca_list_items.item_id 500",
	"ca_list_items.list_id = ca_lists.list_id",
#	"ca_list_items.type_id = ca_list_items.item_id 500",
	"ca_list_items_x_list_items.type_id = ca_relationship_types.type_id",
	"ca_list_items_x_list_items.term_left_id = ca_list_items.item_id",
	"ca_list_items_x_list_items.term_right_id = ca_list_items.item_id",
	"ca_list_labels.list_id = ca_lists.list_id",
	"ca_list_labels.locale_id = ca_locales.locale_id",
	"ca_metadata_element_labels.element_id = ca_metadata_elements.element_id",
	"ca_metadata_element_labels.locale_id = ca_locales.locale_id 1000",
	"ca_metadata_elements.list_id = ca_lists.list_id",
	"ca_metadata_type_restrictions.element_id = ca_metadata_elements.element_id",
	"ca_relationship_type_labels.type_id = ca_relationship_types.type_id",
	"ca_relationship_type_labels.locale_id = ca_locales.locale_id 1000",
	"ca_users_x_groups.user_id = ca_users.user_id",
	"ca_users_x_groups.group_id = ca_user_groups.group_id",
	"ca_users_x_roles.user_id = ca_users.user_id",
	"ca_users_x_roles.role_id = ca_user_roles.role_id",
	
	"ca_item_comments.user_id = ca_users.user_id",
	"ca_item_comments.locale_id = ca_locales.locale_id",
	"ca_item_tags.tag_id = ca_items_x_tags.tag_id",
	"ca_item_tags.locale_id = ca_locales.locale_id",
	"ca_items_x_tags.user_id = ca_users.user_id",
	
	"ca_item_views.user_id = ca_users.user_id",
	"ca_item_views.locale_id = ca_locales.locale_id",
	
	"ca_user_notes.user_id = ca_users.user_id",
	
	"ms_bibliography.project_id = ms_projects.project_id",
	"ms_bibliography.user_id = ca_users.user_id",
	"ms_facilities.project_id = ms_projects.project_id",
	"ms_facilities.user_id = ca_users.user_id",
	"ms_institutions.user_id = ca_users.user_id",
	"ms_media.project_id = ms_projects.project_id",
	"ms_media.media_id = ms_media_multifiles.media_id",
	"ms_media.user_id = ca_users.user_id",
	"ms_media.specimen_id = ms_specimens.specimen_id",
	"ms_media.facility_id = ms_facilities.facility_id",
	"ms_media_x_bibliography.media_id = ms_media.media_id",
	"ms_media_x_bibliography.bibref_id = ms_bibliography.bibref_id",
	"ms_media_x_bibliography.user_id = ca_users.user_id",
	"ms_media_x_ontology.media_id = ms_media.media_id",
	"ms_media_x_ontology.term_id = ms_ontology.term_id",
	"ms_media_x_ontology.user_id = ca_users.user_id",
	"ms_media_x_ontology.alt_id = ms_ontology_terms.alt_id",
	"ms_ontology.user_id = ca_users.user_id",
	"ms_ontology.project_id = ms_projects.project_id",
	"ms_ontology_hierarchy.parent_id = ms_ontology.term_id",
	"ms_ontology_hierarchy.child_id = ms_ontology.term_id",
	"ms_ontology_hierarchy.user_id = ca_users.user_id",
	"ms_ontology_terms.term_id = ms_ontology.term_id",
	"ms_ontology_terms.user_id = ca_users.user_id",
	"ms_ontology_terms.project_id = ms_projects.project_id",
	"ms_ontology_terms.reviewed_by_id = ca_users.user_id",
	"ms_project_users.project_id = ms_projects.project_id",
	"ms_project_users.user_id = ca_users.user_id",
	"ms_projects.user_id = ca_users.user_id",
	"ms_specimens.user_id = ca_users.user_id",
	"ms_specimens.project_id = ms_projects.project_id",
	"ms_specimens.institution_id = ms_institutions.institution_id",
	"ms_specimens.body_mass_bibref_id = ms_bibliography.bibref_id",
	"ms_specimens.locality_absolute_age_bibref_id = ms_bibliography.bibref_id",
	"ms_specimens.locality_relative_age_bibref_id = ms_bibliography.bibref_id",
	"ms_specimens_x_bibliography.specimen_id = ms_specimens.specimen_id",
	"ms_specimens_x_bibliography.bibref_id = ms_bibliography.bibref_id",
	"ms_specimens_x_bibliography.user_id = ca_users.user_id",
	"ms_specimens_x_ontology.specimen_id = ms_specimens.specimen_id",
	"ms_specimens_x_ontology.term_id = ms_ontology.term_id",
	"ms_specimens_x_ontology.user_id = ca_users.user_id",
	"ms_specimens_x_ontology.alt_id = ms_ontology_terms.alt_id",
	"ms_specimens_x_taxonomy.specimen_id = ms_specimens.specimen_id",
	"ms_specimens_x_taxonomy.taxon_id = ms_taxonomy.taxon_id",
	"ms_specimens_x_taxonomy.alt_id = ms_taxonomy_names.alt_id",
	"ms_specimens_x_taxonomy.user_id = ca_users.user_id",
	"ms_taxonomy.project_id = ms_projects.project_id",
	"ms_taxonomy.user_id = ca_users.user_id",
	"ms_taxonomy_names.project_id = ms_projects.project_id",
	"ms_taxonomy_names.taxon_id = ms_taxonomy.taxon_id",
	"ms_taxonomy_names.reviewed_by_id = ca_users.user_id"
]